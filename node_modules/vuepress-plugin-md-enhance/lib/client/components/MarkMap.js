import{wait as v,decodeData as g,LoadingIcon as h}from"@vuepress/helper/client";import{useEventListener as k,useDebounceFn as y}from"@vueuse/core";import{defineComponent as M,ref as w,shallowRef as s,onMounted as D,onUnmounted as b,h as r}from"vue";import"../styles/markmap.scss";var E=M({name:"MarkMap",props:{id:{type:String,required:!0},content:{type:String,required:!0}},setup(a){const o=w(!0),n=s(),i=s();let e=null;return k("resize",y(()=>{e?.fit()},100)),D(()=>{Promise.all([import("markmap-lib"),import("markmap-toolbar"),import("markmap-view"),v(MARKDOWN_ENHANCE_DELAY)]).then(async([{Transformer:m},{Toolbar:l},{Markmap:p,deriveOptions:u}])=>{const d=new m,{frontmatter:f,root:c}=d.transform(g(a.content));e=p.create(i.value,u({maxWidth:240,...f?.markmap}));const{el:t}=l.create(e);await e.setData(c),await e.fit(),t.style.position="absolute",t.style.bottom="0.5rem",t.style.right="0.5rem",n.value.append(t),o.value=!1})}),b(()=>{e?.destroy(),e=null}),()=>r("div",{class:"markmap-wrapper",ref:n},[r("svg",{ref:i,class:"markmap-svg",id:a.id}),o.value?r(h,{class:"markmap-loading",height:360}):null])}});export{E as default};
//# sourceMappingURL=MarkMap.js.map
