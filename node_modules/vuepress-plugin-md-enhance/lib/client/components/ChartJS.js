import{decodeData as h,LoadingIcon as v,wait as y}from"@vuepress/helper/client";import{useMutationObserver as j}from"@vueuse/core";import{defineComponent as w,shallowRef as u,ref as d,computed as S,onMounted as C,watch as b,onUnmounted as A,h as r}from"vue";import"../styles/chartjs.scss";import{g as f}from"../getDarkmodeStatus-DQ0CDr6h.js";const E=(e,n)=>n==="json"?JSON.parse(e):new Function(`let config,__chart_js_config__;
{
${e}
__chart_js_config__=config;
}
return __chart_js_config__;`)();var D=w({name:"ChartJS",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(e){const n=u(),l=u(),i=d(!1),s=d(!0),m=S(()=>h(e.config));let c=!1,t;const p=async a=>{const[{default:o}]=await Promise.all([import("chart.js/auto"),c?Promise.resolve():(c=!0,y(MARKDOWN_ENHANCE_DELAY))]);o.defaults.borderColor=a?"#ccc":"#36A2EB",o.defaults.color=a?"#fff":"#000",o.defaults.maintainAspectRatio=!1;const _=E(m.value,e.type),g=l.value.getContext("2d");t?.destroy(),t=new o(g,_),s.value=!1};return C(()=>{i.value=f(),j(document.documentElement,()=>{i.value=f()},{attributeFilter:["class","data-theme"],attributes:!0}),b(i,a=>p(a),{immediate:!0})}),A(()=>{t?.destroy(),t=null}),()=>[e.title?r("div",{class:"chartjs-title"},decodeURIComponent(e.title)):null,s.value?r(v,{class:"chartjs-loading",height:192}):null,r("div",{ref:n,class:"chartjs-wrapper",id:e.id,style:{display:s.value?"none":"block"}},r("canvas",{ref:l,height:400}))]}});export{D as default};
//# sourceMappingURL=ChartJS.js.map
